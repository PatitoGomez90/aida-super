{% extends './template.html' %}

{% block content %}
<style>
    .mySlides {
        display: none
    }

    .mySlides img {
        vertical-align: middle;
    }

    /* Slideshow container */
    .slideshow-container {
        width: 100%;
        position: relative;
        margin: auto;
        height: 450px;
    }

    /* Next & previous buttons */
    .prev,
    .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        width: auto;
        padding: 16px;
        margin-top: -22px;
        color: white !important;
        font-weight: bold;
        font-size: 18px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
        user-select: none;
    }

    .prev:hover,
    .next:hover {
        background-color: rgba(0, 0, 0, 0.8);
    }

    /* Position the "next button" to the right */
    .prev {
        left: 20px;
        border-radius: 3px 0 0 3px;
    }

    .next {
        right: 20px;
        border-radius: 3px 0 0 3px;
    }

    /* Caption text */
    .text {
        color: #f2f2f2;
        font-size: 15px;
        padding: 8px 12px;
        position: absolute;
        bottom: 8px;
        width: 100%;
        text-align: center;
    }

    /* Number text (1/3 etc) */
    .numbertext {
        color: #f2f2f2;
        font-size: 12px;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Fading animation */
    .fadee {
        -webkit-animation-name: fadee;
        -webkit-animation-duration: 1.5s;
        animation-name: fadee;
        animation-duration: 1.5s;
        height: 100%;
    }

    @keyframes fadee {
        from {
            opacity: .4
        }

        to {
            opacity: 1
        }
    }

    /* On smaller screens, decrease text size */
    @media only screen and (max-width: 300px) {

        .prev,
        .next,
        .text {
            font-size: 11px
        }
    }

    .caption {
        padding: 50px 80px;
        border-radius: 20px;
        background: red;
        background-color: rgba(0, 0, 0, 0.4);
        display: flex;
        flex-direction: column;
    }

    .caption h1 {
        color: white;

    }

    .caption button {
        background-color: #ed1b24;
        color: white;
        margin-top: 40px;
    }

    .caption button:hover {
        background-color: #ed1b24;
        color: #ddd;
    }

    .cantidades {
        border: none;
        width: 100%;
        height: 45px;
        line-height: 45px;
        box-sizing: border-box;
        background: #fff;
        z-index: 0;
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }

    .cantidades a {
        padding: 0 10px;
        font-size: 25px;
        color: #ed1b24 !important;
        font-weight: bold;
        cursor: pointer;
    }

    .cantidades input {
        text-align: center;
        font-size: 16px;
        width: 40%;
        border: 0;
    }
</style>
<!-- Hero Slider Begin -->
<!-- <section class="hero-slider">
    <div class="hero-items owl-carousel">
        <div class="single-slider-item set-bg" data-setbg="img/slider-1.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h1>2019</h1>
                        <h2>Lookbook.</h2>
                        <a href="#" class="primary-btn">See More</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="single-slider-item set-bg" data-setbg="img/slider-2.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h1>2019</h1>
                        <h2>Lookbook.</h2>
                        <a href="#" class="primary-btn">See More</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="single-slider-item set-bg" data-setbg="img/slider-3.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h1>2019</h1>
                        <h2>Lookbook.</h2>
                        <a href="#" class="primary-btn">See More</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section> -->
<!-- Hero Slider End -->
<div class="slideshow-container">

    <div class="mySlides fadee">
        <!-- <div class="numbertext">
            <div class="caption">
                <h1>SLIDER</h1>
                <button class="btn btn-block">boton</button>
            </div>
        </div> -->
        <img src="img/home.png" style="height: 100%; width:100%;">
    </div>

    <div class="mySlides fadee">
        <!-- <div class="numbertext">
            <div class="caption">
                <h1>SLIDER</h1>
                <button class="btn btn-block">boton</button>
            </div>
        </div> -->
        <img src="img/home.png" style="height: 100%; width:100%;">
    </div>

    <div class="mySlides fadee">
        <!-- <div class="numbertext">
            <div class="caption">
                <h1>SLIDER</h1>
                <button class="btn btn-block">boton</button>
            </div>
        </div> -->
        <img src="img/home.png" style="height: 100%; width:100%;">
    </div>

    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <a class="next" onclick="plusSlides(1)">&#10095;</a>

</div>

<!-- Features Section Begin -->
<section class="features-section spad">
    <div class="features-ads">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="single-features-ads">
                        <div style="display: flex; align-items: center; justify-content: center;height: 150px;">
                            <img src="img/icons/chat.png" alt="" />
                        </div>
                        <h4>Hace tu pedido desde casa</h4>
                        <p>
                            Fusce urna quam, euismod sit amet mollis
                            quis, vestibulum quis velit. Vesti bulum mal
                            esuada aliquet libero viverra cursus.
                        </p>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="single-features-ads">
                        <div style="display: flex; align-items: center; justify-content: center;height: 150px;">
                            <img src="img/icons/f-delivery.png" alt="" />
                        </div>
                        <h4>Nosotros te lo enviamos</h4>
                        <p>
                            Urna quam, euismod sit amet mollis quis,
                            vestibulum quis velit. Vesti bulum mal
                            esuada aliquet libero viverra cursus.
                        </p>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="single-features-ads">
                        <div style="display: flex; align-items: center; justify-content: center;height: 150px;">
                            <img src="img/icons/coin.png" alt="" />
                        </div>
                        <h4>Envios Gratis</h4>
                        <p>
                            Urna quam, euismod sit amet mollis quis,
                            vestibulum quis velit. Vesti bulum mal
                            esuada aliquet libero viverra cursus.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Features Box -->
    <!-- <div class="features-box">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="single-box-item first-box">
                                <img src="img/f-box-1.jpg" alt="" />
                                <div class="box-text">
                                    <span class="trend-year">2019 Party</span>
                                    <h2>Jewelry</h2>
                                    <span class="trend-alert">Trend Allert</span>
                                    <a href="#" class="primary-btn">See More</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="single-box-item second-box">
                                <img src="img/f-box-2.jpg" alt="" />
                                <div class="box-text">
                                    <span class="trend-year">2019 Trend</span>
                                    <h2>Footwear</h2>
                                    <span class="trend-alert">Bold & Black</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="single-box-item large-box">
                        <img src="img/f-box-3.jpg" alt="" />
                        <div class="box-text">
                            <span class="trend-year">2019 Party</span>
                            <h2>Collection</h2>
                            <div class="trend-alert">Trend Allert</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
</section>
<!-- Features Section End -->

<!-- Latest Product Begin -->
<section class="latest-products spad">
    <div class="container">
        <div class="product-filter">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="section-title">
                        <h2>Productos Mas Vendidos</h2>
                        <button class="btn" style="margin-top: 20px; color: white; background-color: #ed1b24;">Ver todos
                            los
                            productos</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" id="product-list">

        </div>
    </div>
</section>
<!-- Latest Product End -->

<!-- Lookbok Section Begin -->
<!-- <section class="lookbok-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4 offset-lg-1">
                <div class="lookbok-left">
                    <div class="section-title">
                        <h2>2019 <br />#lookbook</h2>
                    </div>
                    <p>
                        Fusce urna quam, euismod sit amet mollis quis,
                        vestibulum quis velit. Vestibulum malesuada
                        aliquet libero viverra cursus. Aliquam erat
                        volutpat. Morbi id dictum quam, ut commodo
                        lorem. In at nisi nec arcu porttitor aliquet
                        vitae at dui. Sed sollicitudin nulla non leo
                        viverra scelerisque. Phasellus facilisis
                        lobortis metus, sit amet viverra lectus finibus
                        ac. Aenean non felis dapibus, placerat libero
                        auctor, ornare ante. Morbi quis ex eleifend,
                        sodales nulla vitae, scelerisque ante. Nunc id
                        vulputate dui. Suspendisse consectetur rutrum
                        metus nec scelerisque. s
                    </p>
                    <a href="#" class="primary-btn look-btn">See More</a>
                </div>
            </div>
            <div class="col-lg-5 offset-lg-1">
                <div class="lookbok-pic">
                    <img src="img/lookbok.jpg" alt="" />
                    <div class="pic-text">fashion</div>
                </div>
            </div>
        </div>
    </div>
</section> -->
<!-- Lookbok Section End -->

<!-- Logo Section Begin -->
<!-- <div class="logo-section spad">
    <div class="logo-items owl-carousel">
        <div class="logo-item">
            <img src="img/logos/logo-1.png" alt="" />
        </div>
        <div class="logo-item">
            <img src="img/logos/logo-2.png" alt="" />
        </div>
        <div class="logo-item">
            <img src="img/logos/logo-3.png" alt="" />
        </div>
        <div class="logo-item">
            <img src="img/logos/logo-4.png" alt="" />
        </div>
        <div class="logo-item">
            <img src="img/logos/logo-5.png" alt="" />
        </div>
    </div>
</div> -->
<!-- Logo Section End -->
{% endblock %}

{% block scripts %}
<script>

    function EnviarMensaje() {
        let telefono = "542233057982"
        // let mensaje = "Quiero asociarme!"
        let URL = `https://api.whatsapp.com/send?phone=${telefono}`
        window.open(URL, '_blank');
    }

    $(window).on('load', function () {
        loadProductosMasVendidos();
    });

    async function loadProductosMasVendidos() {
        const data = await $.getJSON("/inicio");
        let html = "";
        data.map(p => {
            html += `
                <div class="col-6 col-lg-2 col-md-2">
                    <div class="single-product-item">
                        <figure style="border-radius: 20px;">
                            <img src="img/logo.jpg" alt="" style="border-radius: 20px;">
                        </figure>
                        <div>
                            <p style="font-size: 13px; color: black; font-weight: bold;">${ p.st_nombre}</p>
                            <p style="color: #ed1b24; font-weight: bold;">$ ${ p.st_precio1.toFixed(2)}</p>
                        </div>
                        <div class="cantidades">
                            <button class="btn btn-default" style="border: 1px solid #ddd; padding: 0 15px;" onclick="Cantidades(this, 0)">-</button>
                            <input type="text" readonly value="1">
                            <button class="btn btn-default" style="border: 1px solid #ddd; padding: 0 15px;" onclick="Cantidades(this, 1)">+</button>
                        </div>
                        <button class="btn btn-block btn-danger" onclick="AddToCart(this, '${p.st_codigo1}', '${p.st_nombre}', '${p.st_precio1}')">Agregar</button>
                    </div>
                </div>
            `
        });

        $("#product-list").html(html);
        $(".loader").fadeOut();
        $("#preloder").delay(200).fadeOut("slow");
    }

    var slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        if (n > slides.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slides[slideIndex - 1].style.display = "block";
    }

    async function Cantidades(elem, t) {
        let cantidad = t == 1 ? $(elem).prev().val() : $(elem).next().val()
        cantidad = parseFloat(cantidad);
        if (cantidad == 1 && t == 0) {
            return
        }

        if (t == 1) {
            cantidad++;
            $(elem).prev().val(cantidad);
        } else {
            cantidad--;
            $(elem).next().val(cantidad);
        }
    }

    async function AddToCart(elem, id, title, price) {
        let quantity = $(elem).prev().find("input").val()
        const body = {
            id,
            title,
            quantity,
            price
        }
        const res = await $.post("/productos/add", body);
        Swal.fire({
            type: res.type,
            title: res.title,
            text: res.text
        }).then(() => {
            if (res.type != "error") location.reload();
        })
    }

</script>
{% endblock %}